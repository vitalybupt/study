<config xmlns="urn:6wind:vrouter">
  <system xmlns="urn:6wind:vrouter/system">
    <fast-path xmlns="urn:6wind:vrouter/fast-path">
      <port>pci-b0s4</port>
      <port>pci-b0s5</port>
      <port>pci-b0s6</port>
      <enabled>true</enabled>
      <core-mask>
        <fast-path>1</fast-path>
      </core-mask>
      <cp-protection>
        <budget>10</budget>
      </cp-protection>
      <advanced>
        <mainloop-sleep-delay>500</mainloop-sleep-delay>
      </advanced>
      <limits>
        <svti-max-if>2048</svti-max-if>
      </limits>
      <linux-sync>
        <fpm-socket-size>2097152</fpm-socket-size>
        <nl-socket-size>67108864</nl-socket-size>
        <ipset-dump-delay>1</ipset-dump-delay>
      </linux-sync>
    </fast-path>
    <cp-mask>default</cp-mask>
    <network-stack>
      <icmp>
        <ignore-icmp-echo-broadcast>false</ignore-icmp-echo-broadcast>
        <rate-limit-icmp>1000</rate-limit-icmp>
        <rate-mask-icmp>destination-unreachable source-quench time-exceeded parameter-problem</rate-mask-icmp>
      </icmp>
      <ipv4>
        <forwarding>true</forwarding>
        <send-redirects>true</send-redirects>
        <accept-redirects>false</accept-redirects>
        <accept-source-route>false</accept-source-route>
        <log-invalid-addresses>false</log-invalid-addresses>
      </ipv4>
      <ipv6>
        <forwarding>true</forwarding>
        <accept-router-advert>never</accept-router-advert>
        <accept-redirects>false</accept-redirects>
        <accept-source-route>false</accept-source-route>
        <use-temporary-addresses>never</use-temporary-addresses>
      </ipv6>
    </network-stack>
  </system>
  <vrf>
    <name>main</name>
    <interface xmlns="urn:6wind:vrouter/interface">
      <physical>
        <name>ntfp1</name>
        <port>pci-b0s4</port>
        <enabled>true</enabled>
        <ipv4>
          <enabled>true</enabled>
          <address>
            <ip>10.22.0.1/24</ip>
          </address>
        </ipv4>
        <ipv6>
          <enabled>true</enabled>
        </ipv6>
      </physical>
      <physical>
        <name>ntfp2</name>
        <port>pci-b0s5</port>
        <enabled>true</enabled>
        <ipv4>
          <enabled>true</enabled>
          <address>
            <ip>10.23.0.1/24</ip>
          </address>
        </ipv4>
        <ipv6>
          <enabled>true</enabled>
        </ipv6>
      </physical>
      <physical>
        <name>ntfp3</name>
        <port>pci-b0s6</port>
        <enabled>true</enabled>
        <ipv4>
          <enabled>true</enabled>
          <address>
            <ip>10.150.0.1/24</ip>
          </address>
        </ipv4>
        <ipv6>
          <enabled>true</enabled>
        </ipv6>
      </physical>
      <vrrp xmlns="urn:6wind:vrouter/vrrp">
        <name>VI_1</name>
        <enabled>true</enabled>
        <version>2</version>
        <garp-delay>5</garp-delay>
        <use-vmac>true</use-vmac>
        <vmac-xmit-base>false</vmac-xmit-base>
        <priority>200</priority>
        <init-state>master</init-state>
        <preempt>true</preempt>
        <preempt-delay>0</preempt-delay>
        <advertisement-interval>1000</advertisement-interval>
        <track-fast-path>false</track-fast-path>
        <track-interface>ntfp1</track-interface>
        <vrid>51</vrid>
        <virtual-address>
          <ip>10.100.0.2/24</ip>
        </virtual-address>
        <virtual-route>
          <ip>10.250.0.0/24</ip>
          <gw>10.200.0.1</gw>
        </virtual-route>
        <link-interface>ntfp1</link-interface>
      </vrrp>
      <vrrp xmlns="urn:6wind:vrouter/vrrp">
        <name>VI_2</name>
        <enabled>true</enabled>
        <version>2</version>
        <garp-delay>5</garp-delay>
        <use-vmac>true</use-vmac>
        <vmac-xmit-base>false</vmac-xmit-base>
        <priority>200</priority>
        <init-state>master</init-state>
        <preempt>true</preempt>
        <preempt-delay>0</preempt-delay>
        <advertisement-interval>1000</advertisement-interval>
        <track-fast-path>false</track-fast-path>
        <link-interface>ntfp2</link-interface>
        <vrid>52</vrid>
        <virtual-address>
          <ip>10.100.0.2/24</ip>
        </virtual-address>
        <virtual-route>
          <ip>10.250.0.0/24</ip>
          <gw>10.200.0.1</gw>
        </virtual-route>
      </vrrp>
    </interface>
    <routing xmlns="urn:6wind:vrouter/routing">
      <static>
        <ipv4-route>
          <destination>10.100.0.0/24</destination>
          <next-hop>
            <next-hop>VI_1</next-hop>
          </next-hop>
        </ipv4-route>
        <ipv4-route>
          <destination>10.200.0.0/24</destination>
          <next-hop>
            <next-hop>VI_2</next-hop>
          </next-hop>
        </ipv4-route>
      </static>
    </routing>
    <vrrp xmlns="urn:6wind:vrouter/vrrp">
      <enabled>true</enabled>
      <router-id>router</router-id>
      <traps-enabled>false</traps-enabled>
      <group>
        <name>VG1</name>
      </group>
    </vrrp>
  </vrf>
  <tracker xmlns="urn:6wind:vrouter/tracker">
    <icmp xmlns="urn:6wind:vrouter/tracker/icmp">
      <name>trackerv4</name>
      <address>5.5.5.1</address>
      <vrf>main</vrf>
      <gateway>10.100.0.1</gateway>
      <period>500</period>
      <threshold>1</threshold>
      <total>1</total>
      <packet-size>100</packet-size>
      <packet-tos>192</packet-tos>
    </icmp>
  </tracker>
</config>
